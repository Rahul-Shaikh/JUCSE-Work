<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    
<%@page import="java.sql.ResultSet"%>
<%@page import="com.shopping.DAO"%>
<%@page import="com.shopping.User"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Dashboard</title>

<style type="text/css">
	ul {
		list-style-type: none;
		margin: 0;
		padding: 2px;
		overflow: hidden;
		background-color: #333;
		height: 40px;
	}

	li {
		padding:1px;
		float: left;
		color: #ffffff;
		font-size: 20px;
		text-align: center;
	}

	.cards{
		width:10%;
		display: inline-block;
		border-radius: 10px;
		margin:40px;
		box-shadow:2px 2px 10px black;
	}

	.image img{
		width:100%;
	}

	.title{
		text-align: center;
	}

	.price{
		text-align: center;
		font-size: 20px;
		padding:4px;
	}

	.nameDisp{
		float: right;
	}

	.logout a{
		color:white;
	}

</style>


</head>
<body>
	
	<%
		response.setHeader("Cache-Control","no-cache, no-store, must-revalidate");
		System.out.println((User)session.getAttribute("user"));
		//Session check
		if((User)session.getAttribute("user")==null)
		{
			System.out.println("Hi");
			response.sendRedirect("index.html");
			return;
		}
	%>
	
	<ul>
		<li class="logout"><a href="<%=request.getContextPath()%>/logout">Logout</a></li>
		<li class="nameDisp">Hi, <%=((User)(session.getAttribute("user"))).getName()%></li>
	</ul>
	<br><br>
	<!-- Now fetch the data -->


	<div class="main">

	<%
		
		DAO dao=(DAO)session.getAttribute("dao");
		ResultSet rs=dao.getItems((User)session.getAttribute("user"));
		do
		{
		System.out.println(rs);%>
			<div class="cards">
				
				<div class="title">
					<h2><%=rs.getString("name")%></h2>
				</div>

				<div class="price">
					Price: Rs. <%=rs.getString("price")%>
				</div>

			</div>
		<%}
		while(rs.next());
	%>

	</div>

</body>
</html>